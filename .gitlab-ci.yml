image: node:20

before_script:
  - corepack enable

stages:
  - static_analysis
  - unit_test

lint-app-job:
  stage: static_analysis
  script:
    - cd app
    - pnpm install
    - pnpm run lint

lint-strapi-job:
  stage: static_analysis
  script:
    - cd strapi
    - pnpm install
    - pnpm run lint

unit-test-job:
  stage: unit_test
  script:
    - cd app
    - pnpm install
    - pnpm run test
